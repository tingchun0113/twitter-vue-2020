{"version":3,"sources":["webpack:///./src/views/followers.vue?9cd7","webpack:///./src/views/followers.vue?f736","webpack:///./src/components/followers.vue?1d76","webpack:///src/components/followers.vue","webpack:///./src/components/followers.vue?b4e0","webpack:///./src/components/followers.vue","webpack:///src/views/followers.vue","webpack:///./src/views/followers.vue?e712","webpack:///./src/views/followers.vue","webpack:///./src/components/followers.vue?0f30"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","staticClass","on","$event","$router","go","_v","class","filter","fetchFollowingUsers","userId","fetchFollowers","_e","_l","tweet","key","followingId","name","params","id","followerId","_f","avatar","_s","account","introduction","directives","rawName","value","isFollowed","currentUser","expression","handleUnfollow","handleFollow","mixins","components","Spinner","computed","tweets","isLoading","isClickedFollow","isClickedUnfollow","$route","to","from","next","methods","data","users","getFollowingUsers","status","Error","message","error","fire","icon","title","console","getFollowers","followUser","toString","index","findIndex","followship","cancelFollow","splice","component","mainLeft","followers","newTweet"],"mappings":"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","file":"js/chunk-2dbeba98.8a545278.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./followers.vue?vue&type=style&index=0&lang=sass&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"followersframe\"}},[_c('mainLeft'),_c('followers'),_c('newTweet')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"follow\"}},[_c('div',{staticClass:\"links\"},[_c('a',{on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_vm._v(\"←\")]),_c('div',{class:{filter:_vm.filter},on:{\"click\":function($event){return _vm.fetchFollowingUsers(_vm.userId)}}},[_vm._v(\"Following\")]),_c('div',{class:{filter:!_vm.filter},on:{\"click\":function($event){return _vm.fetchFollowers(_vm.userId)}}},[_vm._v(\"Followers\")])]),(_vm.isLoading)?_c('Spinner'):_vm._e(),_vm._l((_vm.tweets),function(tweet){return _c('div',{key:tweet.followingId,staticClass:\"cards\"},[_c('div',{staticClass:\"left\"},[_c('router-link',{attrs:{\"to\":{ name: 'others', params: { id: tweet.followingId | tweet.followerId } }}},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm._f(\"emptyImage\")(tweet.avatar)}})])],1),_c('div',{staticClass:\"right\"},[_c('router-link',{attrs:{\"to\":{ name: 'others', params: { id: tweet.followingId | tweet.followerId  } }}},[_c('h5',{staticClass:\"info\"},[_vm._v(_vm._s(tweet.name)+\" \"),_c('div',[_vm._v(\"@\"+_vm._s(tweet.account))])])]),_c('p',{staticClass:\"article\"},[_vm._v(_vm._s(tweet.introduction))])],1),_c('div',{staticClass:\"switch\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(tweet.isFollowed && _vm.currentUser.id == _vm.userId),expression:\"tweet.isFollowed && currentUser.id == userId\"}],staticClass:\"on\",on:{\"click\":function($event){return _vm.handleUnfollow(tweet.followingId || tweet.followerId)}}},[_vm._v(\"Unfollow\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!tweet.isFollowed && _vm.currentUser.id == _vm.userId),expression:\"!tweet.isFollowed && currentUser.id == userId\"}],staticClass:\"off\",on:{\"click\":function($event){return _vm.handleFollow(tweet.followerId)}}},[_vm._v(\"Follow\")])])])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"follow\">\n    <div class=\"links\">\n      <a @click=\"$router.go(-1)\">←</a>\n      <div :class=\"{filter:filter}\" @click=\"fetchFollowingUsers(userId)\">Following</div>\n      <div :class=\"{filter:!filter}\" @click=\"fetchFollowers(userId)\">Followers</div>\n    </div>\n    <Spinner v-if=\"isLoading\" />\n\n    <div\n      class=\"cards\"\n      v-for=\"tweet in tweets\"\n      :key=\"tweet.followingId\">\n      <div class=\"left\">\n        <router-link :to=\"{ name: 'others', params: { id: tweet.followingId | tweet.followerId } }\">\n          <img class=\"avatar\" :src=\"tweet.avatar | emptyImage\">\n        </router-link>\n      </div>\n      <div class=\"right\">\n        <router-link :to=\"{ name: 'others', params: { id: tweet.followingId | tweet.followerId  } }\">\n          <h5 class=\"info\">{{ tweet.name }}\n            <div>@{{ tweet.account }}</div>\n          </h5>\n        </router-link>\n        <p class=\"article\">{{ tweet.introduction }}</p>\n      </div>\n      <div class=\"switch\">\n        <div class=\"on\" v-show=\"tweet.isFollowed && currentUser.id == userId\" @click=\"handleUnfollow(tweet.followingId || tweet.followerId)\">Unfollow</div>\n        <div class=\"off\" v-show=\"!tweet.isFollowed && currentUser.id == userId\" @click=\"handleFollow(tweet.followerId)\">Follow</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { emptyImageFilter } from './../utils/mixins'\nimport usersAPI from './../apis/users'\nimport followApi from '../apis/followships'\nimport { Toast } from './../utils/helpers'\nimport Spinner from './../components/spinner'\nimport { mapState } from 'vuex'\n\nexport default {\n  mixins: [emptyImageFilter],\n  components: {\n    Spinner\n  },\n  computed: {\n    ...mapState(['currentUser', 'isAuthenticated'])\n  },\n  data(){\n    return{\n      filter: true,\n      tweets: [],\n      userId: -1,\n      isLoading: true,\n      isClickedFollow: false,\n      isClickedUnfollow: false\n    }\n  },\n  created () {\n    const { id: userId } = this.$route.params\n    this.fetchFollowingUsers (userId)\n    this.userId = userId\n  },\n  beforeRouteUpdate (to, from, next) {\n    const { id: userId } = to.params\n    this.fetchFollowingUsers (userId)\n    this.userId = userId\n    next()\n  },\n  methods: {\n    async fetchFollowingUsers (userId) {\n      this.filter = true\n      try {\n        this.isLoading = true\n        const data = await usersAPI.getFollowingUsers({ userId })\n\n        if (data.status === 'error') {\n          throw new Error(data.message)\n        }\n\n        this.tweets = data.data\n        this.isLoading = false\n      } catch (error) {\n        this.isLoading = false\n        Toast.fire({\n          icon: 'error',\n          title: 'Cannot get users. Please wait for a moment'\n        })\n        console.error(error.message)\n      }\n    },\n    async fetchFollowers (userId) {\n      this.filter = false\n      try {\n        this.isLoading = true\n        const data = await usersAPI.getFollowers({ userId })\n\n        if (data.status === 'error') {\n          throw new Error(data.message)\n        }\n\n        this.tweets = data.data\n        this.isLoading = false\n      } catch (error) {\n        this.isLoading = false\n        Toast.fire({\n          icon: 'error',\n          title: 'Cannot get followers. Please wait for a moment'\n        })\n        console.error(error.message)\n      }\n    },\n    async handleFollow(id) {\n      try {\n         if (this.isClickedFollow) {\n          return\n        }\n        this.isClickedFollow = true\n\n        const data = await followApi.followUser({ id: id.toString() })\n        if (data.status === 'error') {\n          throw new Error(data.message)\n        }\n        Toast.fire({\n          icon: 'success',\n          title: 'Following this user'\n        })\n        const index = this.tweets.findIndex(followship => followship.followerId === id)\n        this.tweets[index].isFollowed = true\n        this.isClickedFollow = false\n      } catch (error) {\n        Toast.fire({\n          icon: 'error',\n          title: 'Failed to follow. Please wait for a moment'\n        })\n        this.isClickedFollow = false\n        console.error(error.message)\n      }\n    },\n    async handleUnfollow (id) {\n      try {\n         if (this.isClickedUnfollow) {\n          return\n        }\n        this.isClickedUnfollow = true\n\n        const data = await followApi.cancelFollow({ followingId: id.toString() })\n        if (data.status === 'error') {\n          throw new Error(data.message)\n        }\n        Toast.fire({\n          icon: 'success',\n          title: 'Unfollowed this user'\n        })\n        const index = this.tweets.findIndex(followship => followship.followingId === id || followship.followerId === id)\n        this.tweets[index].isFollowed = false\n        if (this.tweets[index].followingId) { // update following user list\n          this.tweets.splice(index, 1)\n        }\n        this.isClickedUnfollow = false\n      } catch (error) {\n        Toast.fire({\n          icon: 'error',\n          title: 'Failed to unfollow. Please wait for a moment'\n        })\n        this.isClickedUnfollow = false\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"sass\">\n$font-color: rgba(#b0d7f6, .8)\n#follow\n  padding: 10px\n  overflow-x: hidden\n  overflow-y: auto\n  .links\n    display: grid\n    grid-template:\n      columns: repeat(3, 1fr)\n    width: 250px\n    a\n      font-size: 24px\n    div\n      text-align: center\n      padding: 10px 0\n    &:hover\n      cursor: pointer\n    .filter\n      border-bottom: 5px solid $font-color\n  .cards\n    width: 100%\n    display: flex\n    border-radius: 10px\n    background-color: #f1f7fd\n    margin: 20px 0\n    padding:\n      top: 20px\n      bottom: 15px\n    position: relative\n    .left\n      padding: 0 10px\n      .avatar\n        width: 50px\n        height: 50px\n        border-radius: 50px\n        background-color: grey\n        object-fit: cover\n    .right\n      .info\n        &:hover\n          text-decoration: underline\n        div\n          color: grey\n      .article\n        margin:\n          top: 10px\n        white-space: normal\n    .switch\n      position: absolute\n      top: 10px\n      right: 20px\n      div\n        text-align: center\n        padding: 5px 10px\n        border-radius: 10px\n        &:hover\n          cursor: pointer\n      .on\n        background:\n          color: $font_color\n      .off\n        color: $font_color\n        border: 2px solid $font_color\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./followers.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./followers.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./followers.vue?vue&type=template&id=3eb7e854&\"\nimport script from \"./followers.vue?vue&type=script&lang=js&\"\nexport * from \"./followers.vue?vue&type=script&lang=js&\"\nimport style0 from \"./followers.vue?vue&type=style&index=0&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"followersframe\">\n    <mainLeft/>\n    <followers/>\n    <newTweet/>\n  </div>\n</template>\n\n<script>\nimport mainLeft from '../components/mainLeft'\nimport followers from '../components/followers'\nimport newTweet from '../components/newTweet'\nexport default {\n  components: {\n    mainLeft,\n    followers,\n    newTweet\n  },\n}\n</script>\n\n<style lang=\"sass\">\n#followersframe\n  width: 100vw\n  height: 100vh\n  display: grid\n  grid-template:\n    columns: 20vw 1fr\n    areas: \"left followers\"\n  position: relative\n  #mainLeft\n    grid-area: left\n  #followers\n    grid-area: followers\n  #newTweet\n    position: absolute\n    top: 0\n    left: 0\n    width: 100vw\n    height: 100vh\n    grid-area: 1/1/3/3\n    background-color: rgba(grey,.8)\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./followers.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./followers.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./followers.vue?vue&type=template&id=654952d5&\"\nimport script from \"./followers.vue?vue&type=script&lang=js&\"\nexport * from \"./followers.vue?vue&type=script&lang=js&\"\nimport style0 from \"./followers.vue?vue&type=style&index=0&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./followers.vue?vue&type=style&index=0&lang=sass&\""],"sourceRoot":""}