(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3de56c14"],{2437:function(e,t,s){},"40ff":function(e,t,s){"use strict";s("2437")},5938:function(e,t,s){"use strict";s("e474")},"6c2f":function(e,t,s){},8209:function(e,t,s){"use strict";s("b271")},"917d":function(e,t,s){"use strict";s("fcb8")},a547:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{same:e.currentUser.id==e.userId},attrs:{id:"userframe"}},[s("mainLeft"),s("userTop",{on:{goTweet:e.goTweet,goReply:e.goReply,goLike:e.goLike}}),s("userTweet",{directives:[{name:"show",rawName:"v-show",value:e.tweet,expression:"tweet"}]}),s("userReply",{directives:[{name:"show",rawName:"v-show",value:e.reply,expression:"reply"}]}),s("userLike",{directives:[{name:"show",rawName:"v-show",value:e.like,expression:"like"}]}),s("mainRightFollow"),s("newTweet"),s("userEditor")],1)},r=[],a=s("fb77"),o=s("a16e"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"userTweet"}},[e.isLoading?s("Spinner"):e._e(),e._l(e.tweets,(function(t){return s("div",{key:t.id,staticClass:"cards"},[s("div",{staticClass:"left"},[s("img",{staticClass:"avatar",attrs:{src:e._f("emptyImage")(t.User.avatar),alt:"tweet.avatar"}})]),s("div",{staticClass:"right"},[s("h5",{staticClass:"info"},[e._v(e._s(t.User.name)+" "),s("span",[e._v("@"+e._s(t.User.account)+"·"+e._s(e._f("fromNow")(t.createdAt)))])]),s("router-link",{staticClass:"article",attrs:{to:{name:"reply_list",params:{tweetId:t.id}}}},[s("p",[e._v(e._s(t.description))])]),s("div",{staticClass:"icons"},[s("div",{staticClass:"reply"},[e._v(e._s(t.replyCount)+" replies")]),s("div",{staticClass:"like"},[e._v(e._s(t.likeCount)+" likes")])])],1)])}))],2)},l=[],c=s("2708"),u=s("4cce"),d=s("2fa3"),m=s("9348"),h=s("f5ef"),w={mixins:[c["a"],c["c"]],components:{Spinner:m["a"]},data(){return{tweets:[],isLoading:!0}},created(){const{id:e}=this.$route.params;this.fetchUserTweets(e),h["a"].$on("tweetSuccess",()=>{this.fetchUserTweets(e)})},beforeRouteUpdate(e,t,s){const{id:i}=e.params;this.fetchUserTweets(i),s()},methods:{async fetchUserTweets(e){try{this.isLoading=!0;const t=await u["a"].getUserTweets({userId:e});if("error"===t.status)throw new Error(t.message);this.tweets=t.data,this.isLoading=!1}catch(t){this.isLoading=!1,d["a"].fire({icon:"error",title:"Cannot get tweets. Please wait for a moment"}),console.error(t.message)}}}},f=w,v=(s("5938"),s("2877")),p=Object(v["a"])(f,n,l,!1,null,null,null),g=p.exports,C=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"userTop"}},[s("router-link",{directives:[{name:"show",rawName:"v-show",value:e.currentUser.id!=e.userId,expression:"currentUser.id != userId"}],staticClass:"links",attrs:{to:"/main/"}},[e._v(" ← Home ")]),s("div",{staticClass:"image"},[s("img",{staticClass:"cover",attrs:{src:e._f("emptyImage")(e.user.cover),alt:"user.cover"}}),s("img",{staticClass:"avatar",attrs:{src:e._f("emptyImage")(e.user.avatar),alt:"user.avatar"}})]),s("div",{staticClass:"button"},[e.currentUser.id==e.userId?s("div",{on:{click:function(t){return e.editor(e.user)}}},[e._v("Edit profile")]):e._e(),e.currentUser.id!=e.userId?[s("div",{directives:[{name:"show",rawName:"v-show",value:e.user.isFollowed,expression:"user.isFollowed"}],staticClass:"on",on:{click:function(t){return e.handleUnfollow(e.user.id)}}},[e._v(" Unfollow ")]),e.user.isFollowed?e._e():s("div",{staticClass:"off",on:{click:function(t){return e.handleFollow(e.user.id)}}},[e._v(" Follow ")])]:e._e()],2),s("div",{staticClass:"card"},[s("div",{staticClass:"name"},[e._v(e._s(e.user.name)+" "),s("div",{staticClass:"account"},[e._v("@"+e._s(e.user.account))])]),s("div",{staticClass:"intro"},[e._v(e._s(e.user.introduction))]),s("div",{staticClass:"follow"},[s("div",[e._v(e._s(e.user.tweetCount)+" Tweets")]),s("div",{staticClass:"following"},[s("router-link",{attrs:{to:{name:"followers",params:{id:e.userId}}}},[e._v(" "+e._s(e.user.followingCount)+" Following ")])],1),s("div",{staticClass:"follower"},[s("router-link",{attrs:{to:{name:"followers",params:{id:e.userId}}}},[e._v(" "+e._s(e.user.followerCount)+" Followers ")])],1)])]),s("div",{staticClass:"filter"},[s("div",{class:{tweet:"tweet"==e.links},on:{click:e.tweet}},[e._v("Tweets")]),s("div",{class:{reply:"reply"==e.links},on:{click:e.reply}},[e._v("Replies")]),s("div",{class:{like:"like"==e.links},on:{click:e.like}},[e._v("Likes")])])],1)},_=[],k=s("8845"),y=s("2f62"),U={mixins:[c["a"]],components:{Spinner:m["a"]},data(){return{links:"tweet",length:0,user:{id:-1,account:"",name:"",email:"",introduction:"",avatar:"",cover:"",tweetCount:0,followingCount:0,followerCount:0,isFollowed:!0},isLoading:!0,isClickedFollow:!1,isClickedUnfollow:!1,userId:""}},created(){const{id:e}=this.$route.params;this.fetchUser(e),this.userId=e,h["a"].$on("changeFollow",()=>{this.fetchUser(e)})},beforeRouteUpdate(e,t,s){const{id:i}=e.params;this.fetchUser(i),s()},methods:{tweet(){this.links="tweet",this.$emit("goTweet")},reply(){this.links="reply",this.$emit("goReply")},like(){this.links="like",this.$emit("goLike")},async fetchUser(e){try{this.isLoading=!0;const{data:t}=await u["a"].getUser({userId:e});if("error"===t.status)throw new Error(t.message);const{id:s,account:i,name:r,email:a,introduction:o,avatar:n,cover:l,tweetCount:c,followingCount:d,followerCount:m,isFollowed:h}=t;this.user={...this.user,id:s,account:i,name:r,email:a,introduction:o,avatar:n,cover:l,tweetCount:c,followingCount:d,followerCount:m,isFollowed:h},this.isLoading=!1}catch(t){this.isLoading=!1,console.error(t.message)}},editor(e){h["a"].$emit("toeditor",e)},async handleFollow(e){try{if(this.isClickedFollow)return;this.isClickedFollow=!0;const t=await k["a"].followUser({id:e.toString()});if("error"===t.status)throw new Error(t.message);d["a"].fire({icon:"success",title:"Following this user"}),h["a"].$emit("chanFollow"),this.user.isFollowed=!0,this.isClickedFollow=!1}catch(t){d["a"].fire({icon:"error",title:"Failed to follow. Please wait for a moment"}),this.isClickedFollow=!1,console.error(t.message)}},async handleUnfollow(e){try{if(this.isClickedUnfollow)return;this.isClickedUnfollow=!0;const t=await k["a"].cancelFollow({followingId:e.toString()});if("error"===t.status)throw new Error(t.message);d["a"].fire({icon:"success",title:"Unfollowed this user"}),h["a"].$emit("chanFollow"),this.user.isFollowed=!1,this.isClickedUnfollow=!1}catch(t){d["a"].fire({icon:"error",title:"Failed to unfollow. Please wait for a moment"}),this.isClickedUnfollow=!1}}},computed:{...Object(y["b"])(["currentUser","isAuthenticated"])}},T=U,b=(s("917d"),Object(v["a"])(T,C,_,!1,null,null,null)),L=b.exports,I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"userLike"}},[e.isLoading?s("Spinner"):e._e(),e._l(e.likes,(function(t){return s("div",{key:t.id,staticClass:"cards"},[s("div",{staticClass:"left"},[s("router-link",{attrs:{to:{name:"others",params:{id:t.User.id}}}},[s("img",{staticClass:"avatar",attrs:{src:e._f("emptyImage")(t.User.avatar),alt:"like.avatar"}})])],1),s("div",{staticClass:"right"},[s("router-link",{staticClass:"info",attrs:{to:{name:"others",params:{id:t.User.id}}}},[e._v(e._s(t.User.name)+" "),s("span",[e._v("@"+e._s(t.User.account)+"·"+e._s(e._f("fromNow")(t.createdAt)))])]),s("router-link",{staticClass:"article",attrs:{to:{name:"reply_list",params:{tweetId:t.TweetId}}}},[s("p",[e._v(e._s(t.description))])]),s("div",{staticClass:"icons"},[s("div",{staticClass:"like"},[e._v(e._s(t.likeCount)+" likes")])])],1)])}))],2)},x=[],F={mixins:[c["a"],c["c"]],components:{Spinner:m["a"]},data(){return{likes:[],isLoading:!0}},created(){const{id:e}=this.$route.params;this.fetchUserLikedTweets(e)},beforeRouteUpdate(e,t,s){const{id:i}=e.params;this.fetchUserLikedTweets(i),s()},methods:{async fetchUserLikedTweets(e){try{this.isLoading=!0;const t=await u["a"].getUserLikedTweets({userId:e});if("error"===t.status)throw new Error(t.message);this.likes=t.data,this.isLoading=!1}catch(t){this.isLoading=!1,d["a"].fire({icon:"error",title:"Cannot get liked tweets. Please wait for a moment"}),console.error(t.message)}}}},$=F,E=(s("f54e"),Object(v["a"])($,I,x,!1,null,null,null)),R=E.exports,O=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"userReply"}},[e.isLoading?s("Spinner"):e._e(),e._l(e.replies,(function(t){return s("div",{key:t.ReplyId,staticClass:"cards"},[s("div",{staticClass:"left"},[s("router-link",{attrs:{to:{name:"others",params:{id:t.Tweet.User.id}}}},[s("img",{staticClass:"avatar",attrs:{src:t.Tweet.User.avatar,alt:"reply.avatar"}})])],1),s("div",{staticClass:"right"},[s("router-link",{staticClass:"info",attrs:{to:{name:"others",params:{id:t.Tweet.User.id}}}},[e._v(e._s(t.Tweet.User.name)+" "),s("span",[e._v("@"+e._s(t.Tweet.User.account)+"·"+e._s(e._f("fromNow")(t.createdAt)))])]),s("router-link",{staticClass:"article",attrs:{to:{name:"reply_list",params:{tweetId:t.Tweet.TweetId}}}},[s("p",[e._v(e._s(t.Tweet.description))])]),s("div",{staticClass:"icons"},[s("div",{staticClass:"reply"},[e._v(e._s(t.Tweet.replyCount)+" replies")])])],1)])}))],2)},P=[],S={mixins:[c["a"],c["c"]],components:{Spinner:m["a"]},data(){return{replies:[],isLoading:!0}},created(){const{id:e}=this.$route.params;this.fetchUserRepliedTweets(e)},beforeRouteUpdate(e,t,s){const{id:i}=e.params;this.fetchUserRepliedTweets(i),s()},methods:{async fetchUserRepliedTweets(e){try{this.isLoading=!0;const t=await u["a"].getUserRepliedTweets({userId:e});if("error"===t.status)throw new Error(t.message);this.replies=t.data?t.data.filter(e=>null!==e.Tweet):[],this.isLoading=!1}catch(t){this.isLoading=!1,d["a"].fire({icon:"error",title:"Cannot get replied tweets. Please wait for a moment"}),console.error(t.message)}}}},N=S,j=(s("8209"),Object(v["a"])(N,O,P,!1,null,null,null)),A=j.exports,B=s("fb1a"),K=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.modalOn,expression:"modalOn"}],attrs:{id:"userEditor"},on:{click:function(t){return t.target!==t.currentTarget?null:e.closeModal()}}},[i("div",{staticClass:"form"},[i("h3",[e._v("Edit profile")]),i("div",{staticClass:"image"},[i("div",{staticClass:"cover",style:"background-image: url("+e.user.cover||!1},[i("img",{attrs:{src:s("a595")},on:{click:function(t){return e.changeCover(e.user)}}})]),i("div",{staticClass:"avatar",style:"background-image: url("+e.user.avatar||!1},[i("img",{attrs:{src:s("a595")},on:{click:function(t){return e.changeAvatar(e.user)}}})])]),i("form",{on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.handleSubmit(e.user)}}},[i("div",{staticClass:"input-group"},[i("label",{attrs:{for:"name"}},[e._v("Name")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],attrs:{type:"text",id:"name",maxlength:"50"},domProps:{value:e.user.name},on:{input:[function(t){t.target.composing||e.$set(e.user,"name",t.target.value)},e.countName]}}),i("div",{staticClass:"length"},[e._v(e._s(e.nameCount)+"/50")])]),i("div",{staticClass:"input-group"},[i("label",{attrs:{for:"intro"}},[e._v("Bio")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.user.introduction,expression:"user.introduction"}],attrs:{id:"intro",maxlength:"160"},domProps:{value:e.user.introduction},on:{input:[function(t){t.target.composing||e.$set(e.user,"introduction",t.target.value)},e.countIntro],keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),t.stopPropagation(),t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.handleSubmit(e.user))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeModal()}]}}),i("div",{staticClass:"length"},[e._v(e._s(e.introCount)+"/160")])]),i("button",{staticClass:"button",class:{isProcessing:e.isProcessing},attrs:{type:"submit",disabled:e.isProcessing}},[e._v("Save")]),i("div",{staticClass:"close",on:{click:function(t){return t.target!==t.currentTarget?null:e.closeModal()}}},[e._v("×")])])])])},M=[],D={data(){return{user:{},modalOn:!1,introCount:0,nameCount:0,isProcessing:!1}},created(){h["a"].$on("toeditor",e=>{this.user=e,this.modalOn=!this.modalOn,this.introCount=this.user?this.user.introduction.length:0,this.nameCount=this.user?this.user.name.length:0})},methods:{async handleSubmit(e){try{this.isProcessing=!0;const{data:t}=await u["a"].putProfile({userId:this.currentUser.id,profile:{cover:e.cover,avatar:e.avatar,name:e.name,introduction:e.introduction}});if("error"===t.status)throw new Error(t.message);d["a"].fire({icon:"success",title:"Successfully updated"}),this.modalOn=!this.modalOn,this.isProcessing=!1}catch(t){this.isProcessing=!1,d["a"].fire({icon:"error",title:"Cannot update profile. Please wait for a moment"}),console.error(t.message)}},changeCover(e){d["a"].fire({title:"Please enter a valid URL",input:"text",timer:void 0,position:"center",showCancelButton:!0,showConfirmButton:!0}).then(t=>{t.isConfirmed&&(e.cover=t.value,this.handleSubmit(e))})},changeAvatar(e){d["a"].fire({title:"Please enter a valid URL",input:"text",timer:void 0,position:"center",showCancelButton:!0,showConfirmButton:!0}).then(t=>{t.isConfirmed&&(e.avatar=t.value,this.handleSubmit(e))})},closeModal(){this.modalOn=!this.modalOn},countIntro(){this.introCount=this.user.introduction.length},countName(){this.nameCount=this.user.name.length}},computed:{...Object(y["b"])(["currentUser","isAuthenticated"])}},J=D,H=(s("40ff"),Object(v["a"])(J,K,M,!1,null,null,null)),q=H.exports,z={components:{mainLeft:a["a"],mainRightFollow:o["a"],userTweet:g,userLike:R,userReply:A,userTop:L,newTweet:B["a"],userEditor:q},data(){return{tweet:!0,reply:!1,like:!1}},methods:{goTweet(){this.tweet=!0,this.reply=!1,this.like=!1},goReply(){this.reply=!0,this.tweet=!1,this.like=!1},goLike(){this.like=!0,this.reply=!1,this.tweet=!1}},created(){const{id:e}=this.$route.params;this.userId=e},computed:{...Object(y["b"])(["currentUser","isAuthenticated"])}},G=z,Q=(s("f087"),Object(v["a"])(G,i,r,!1,null,null,null));t["default"]=Q.exports},a595:function(e,t,s){e.exports=s.p+"img/camera-add.8f3f26a0.png"},b271:function(e,t,s){},de85:function(e,t,s){},e474:function(e,t,s){},f087:function(e,t,s){"use strict";s("de85")},f54e:function(e,t,s){"use strict";s("6c2f")},fcb8:function(e,t,s){}}]);
//# sourceMappingURL=chunk-3de56c14.62238ed2.js.map