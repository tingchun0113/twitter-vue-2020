(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2dbeba98"],{"0013":function(e,t,s){},3492:function(e,t,s){"use strict";s("0013")},"727e":function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"followersframe"}},[s("mainLeft"),s("followers"),s("newTweet")],1)},i=[],l=s("fb77"),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"follow"}},[s("div",{staticClass:"links"},[s("a",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("←")]),s("div",{class:{filter:e.filter},on:{click:function(t){return e.fetchFollowingUsers(e.userId)}}},[e._v("Following")]),s("div",{class:{filter:!e.filter},on:{click:function(t){return e.fetchFollowers(e.userId)}}},[e._v("Followers")])]),e.isLoading?s("Spinner"):e._e(),e._l(e.tweets,(function(t){return s("div",{key:t.followingId,staticClass:"cards"},[s("div",{staticClass:"left"},[s("router-link",{attrs:{to:{name:"others",params:{id:t.followingId|t.followerId}}}},[s("img",{staticClass:"avatar",attrs:{src:e._f("emptyImage")(t.avatar)}})])],1),s("div",{staticClass:"right"},[s("router-link",{attrs:{to:{name:"others",params:{id:t.followingId|t.followerId}}}},[s("h5",{staticClass:"info"},[e._v(e._s(t.name)+" "),s("div",[e._v("@"+e._s(t.account))])])]),s("p",{staticClass:"article"},[e._v(e._s(t.introduction))])],1),s("div",{staticClass:"switch"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isFollowed&&e.currentUser.id==e.userId,expression:"tweet.isFollowed && currentUser.id == userId"}],staticClass:"on",on:{click:function(s){return e.handleUnfollow(t.followingId||t.followerId)}}},[e._v("Unfollow")]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isFollowed&&e.currentUser.id==e.userId,expression:"!tweet.isFollowed && currentUser.id == userId"}],staticClass:"off",on:{click:function(s){return e.handleFollow(t.followerId)}}},[e._v("Follow")])])])}))],2)},n=[],a=s("2708"),c=s("4cce"),w=s("8845"),d=s("2fa3"),f=s("9348"),u=s("2f62"),h={mixins:[a["a"]],components:{Spinner:f["a"]},computed:{...Object(u["b"])(["currentUser","isAuthenticated"])},data(){return{filter:!0,tweets:[],userId:-1,isLoading:!0,isClickedFollow:!1,isClickedUnfollow:!1}},created(){const{id:e}=this.$route.params;this.fetchFollowingUsers(e),this.userId=e},beforeRouteUpdate(e,t,s){const{id:o}=e.params;this.fetchFollowingUsers(o),this.userId=o,s()},methods:{async fetchFollowingUsers(e){this.filter=!0;try{this.isLoading=!0;const t=await c["a"].getFollowingUsers({userId:e});if("error"===t.status)throw new Error(t.message);this.tweets=t.data,this.isLoading=!1}catch(t){this.isLoading=!1,d["a"].fire({icon:"error",title:"Cannot get users. Please wait for a moment"}),console.error(t.message)}},async fetchFollowers(e){this.filter=!1;try{this.isLoading=!0;const t=await c["a"].getFollowers({userId:e});if("error"===t.status)throw new Error(t.message);this.tweets=t.data,this.isLoading=!1}catch(t){this.isLoading=!1,d["a"].fire({icon:"error",title:"Cannot get followers. Please wait for a moment"}),console.error(t.message)}},async handleFollow(e){try{if(this.isClickedFollow)return;this.isClickedFollow=!0;const t=await w["a"].followUser({id:e.toString()});if("error"===t.status)throw new Error(t.message);d["a"].fire({icon:"success",title:"Following this user"});const s=this.tweets.findIndex(t=>t.followerId===e);this.tweets[s].isFollowed=!0,this.isClickedFollow=!1}catch(t){d["a"].fire({icon:"error",title:"Failed to follow. Please wait for a moment"}),this.isClickedFollow=!1,console.error(t.message)}},async handleUnfollow(e){try{if(this.isClickedUnfollow)return;this.isClickedUnfollow=!0;const t=await w["a"].cancelFollow({followingId:e.toString()});if("error"===t.status)throw new Error(t.message);d["a"].fire({icon:"success",title:"Unfollowed this user"});const s=this.tweets.findIndex(t=>t.followingId===e||t.followerId===e);this.tweets[s].isFollowed=!1,this.tweets[s].followingId&&this.tweets.splice(s,1),this.isClickedUnfollow=!1}catch(t){d["a"].fire({icon:"error",title:"Failed to unfollow. Please wait for a moment"}),this.isClickedUnfollow=!1}}}},g=h,m=(s("7388"),s("2877")),v=Object(m["a"])(g,r,n,!1,null,null,null),F=v.exports,I=s("fb1a"),k={components:{mainLeft:l["a"],followers:F,newTweet:I["a"]}},p=k,C=(s("3492"),Object(m["a"])(p,o,i,!1,null,null,null));t["default"]=C.exports},7388:function(e,t,s){"use strict";s("99f1")},"99f1":function(e,t,s){}}]);
//# sourceMappingURL=chunk-2dbeba98.8a545278.js.map